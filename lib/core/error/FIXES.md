# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ Flutter Framework

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
```
_AssertionError ('package:flutter/src/widgets/framework.dart': Failed assertion: line 4277 pos 7: 'parent == null || parent._lifecycleState == _ElementLifecycle.active': Parent (FocusScope) should be null or in the active state (inactive))
_AssertionError ('package:flutter/src/widgets/framework.dart': Failed assertion: line 5769 pos 12: 'child == _child': is not true.)
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ErrorSystemIntegration**
- ‚ùå **–ë—ã–ª–æ**: –°–ª–æ–∂–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ —Å MaterialApp –≤–Ω—É—Ç—Ä–∏ ProviderScope
- ‚úÖ **–°—Ç–∞–ª–æ**: –ü—Ä–æ—Å—Ç–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–∏–¥–∂–µ—Ç–æ–≤

```dart
// –ë—ã–ª–æ (–ø—Ä–æ–±–ª–µ–º–Ω–æ–µ):
ErrorSystemIntegration.wrapApp(ProviderScope(...))

// –°—Ç–∞–ª–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ):
ErrorSystemIntegration.initialize();
runApp(ProviderScope(...));
```

### 2. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `context.mounted` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è StateNotifier

```dart
// –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
if (!context.mounted) return;

// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
try {
  state = state.copyWith(isShowingDialog: false);
} catch (e) {
  // StateNotifier —É–∂–µ dispose, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
}
```

### 3. **SafeErrorHandling —É—Ç–∏–ª–∏—Ç—ã**
- ‚úÖ –ù–æ–≤—ã–π –∫–ª–∞—Å—Å `SafeErrorHandling` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

```dart
// –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
SafeErrorHandling.handleErrorWithContext(context, error);
```

### 4. **–£–ª—É—á—à–µ–Ω–Ω—ã–π ErrorWidget.builder**
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥–∂–µ—Ç –æ—à–∏–±–∫–∏ –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –±–∏–ª–¥–µ—Ä–µ
- ‚úÖ Fallback –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### 5. **StateErrorHandlerMixin**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `mounted` –ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å ProviderScope
- ‚úÖ Try-catch –±–ª–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –≤–∏–¥–∂–µ—Ç–æ–≤
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å navigatorKey
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- Graceful handling –æ—à–∏–±–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã –æ—à–∏–±–æ–∫

### ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í main.dart:
```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await _initializeLogging();
  
  // –ü—Ä–æ—Å—Ç–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  ErrorSystemIntegration.initialize();
  
  runApp(
    ProviderScope(
      observers: [LogInterceptor()], 
      child: MyApp(),
    ),
  );
}

class MyApp extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return MaterialApp(
      // –í–∞–∂–Ω–æ: –¥–æ–±–∞–≤–ª—è–µ–º navigatorKey
      navigatorKey: ref.watch(navigatorKeyProvider),
      home: MyHomePage(),
    );
  }
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- üéØ –ö–Ω–æ–ø–∫–∞ "–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –æ—à–∏–±–æ–∫" –≤ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ
- üìÅ –ü–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `lib/core/error/test_widget.dart`
- üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `lib/core/error/QUICK_START.md`

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –æ—à–∏–±–æ–∫:
- ‚úÖ **–ù–µ –ø–∞–¥–∞–µ—Ç** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ **–ù–µ —Å–æ–∑–¥–∞–µ—Ç** —Ü–∏–∫–ª—ã –≤–∏–¥–∂–µ—Ç–æ–≤
- ‚úÖ **–ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç** —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- ‚úÖ **–õ–æ–≥–∏—Ä—É–µ—Ç** –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç fallback** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üéâ
