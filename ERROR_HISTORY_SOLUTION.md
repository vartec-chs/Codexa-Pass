# –ò—Å—Ç–æ—Ä–∏—è –æ—à–∏–±–æ–∫ - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–µ—Ç–∞–ª—è–º

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —É—Ö–æ–¥–µ —Å —ç–∫—Ä–∞–Ω–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏, —Ç–∞–∫ –∫–∞–∫ ErrorBoundary —Å–±—Ä–∞—Å—ã–≤–∞–ª —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ ErrorController

```dart
class ErrorController {
  /// –ò—Å—Ç–æ—Ä–∏—è –æ—à–∏–±–æ–∫ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π
  final List<AppError> _errorHistory = [];
  final Map<String, AppError> _persistedErrors = {};

  /// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
  void persistError(AppError error) {
    _persistedErrors[error.errorId] = error;
    _errorHistory.add(error);
    
    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ config)
    if (_errorHistory.length > config.maxErrorHistorySize) {
      final removedError = _errorHistory.removeAt(0);
      _persistedErrors.remove(removedError.errorId);
    }
  }

  /// –ü–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫—É –ø–æ ID
  AppError? getPersistedError(String errorId) {
    return _persistedErrors[errorId];
  }

  /// –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ—à–∏–±–æ–∫
  List<AppError> get errorHistory => List.unmodifiable(_errorHistory);
}
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ ErrorBoundary

```dart
class _ErrorBoundaryState extends ConsumerState<ErrorBoundary> {
  @override
  void dispose() {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—à–∏–±–∫—É –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–µ—Ä–µ–¥ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ–º
    if (_hasError && _currentError != null && widget.enableLogging) {
      final errorController = ref.read(errorControllerProvider);
      errorController.persistError(_currentError!);
    }
    super.dispose();
  }

  void _handleError(AppError error) {
    // –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
    if (widget.enableLogging) {
      final errorController = ref.read(errorControllerProvider);
      errorController.handleError(error);
      errorController.persistError(error); // ‚≠ê –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    }
  }
}
```

### 3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –æ—à–∏–±–æ–∫ (ErrorHistoryPage)

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—à–∏–±–æ–∫** —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–Ω—è–º
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –ø–æ –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–µ
- **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –º–æ–¥—É–ª—è–º –∏ —Ç–∏–ø–∞–º
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π** –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- **–£–¥–∞–ª–µ–Ω–∏–µ** –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- **–û—á–∏—Å—Ç–∫–∞** –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏

#### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
```dart
class ErrorHistoryPage extends ConsumerWidget {
  // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ –¥–Ω—è–º
  Widget _buildErrorList(context, errors, controller) {
    final groupedErrors = <String, List<AppError>>{};
    // "–°–µ–≥–æ–¥–Ω—è", "–í—á–µ—Ä–∞", "15.07.2025"
  }

  // –ö–∞—Ä—Ç–æ—á–∫–∞ –æ—à–∏–±–∫–∏ —Å –∏–∫–æ–Ω–∫–æ–π —É—Ä–æ–≤–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
  Widget _buildErrorCard(context, error, controller) {
    return Card(
      child: InkWell(
        onTap: () => _showErrorDetails(context, error),
        child: // –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ —Å —Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
      ),
    );
  }

  // –ü–æ–ª–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –¥–µ—Ç–∞–ª—è–º–∏
  void _showErrorDetails(BuildContext context, AppError error) {
    showDialog(
      context: context,
      builder: (context) => AlertDialog(
        // –í—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
      ),
    );
  }
}
```

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ `ErrorConfig`:
```dart
class ErrorConfig {
  const ErrorConfig({
    this.maxErrorHistorySize = 50, // ‚≠ê –ú–∞–∫—Å–∏–º—É–º –æ—à–∏–±–æ–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏
    // ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  });

  final int maxErrorHistorySize;
}
```

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ–º–æ –≤–∏–¥–∂–µ—Ç–æ–º

```dart
// –í AppBar ErrorDemoPage –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞
IconButton(
  icon: const Icon(Icons.history),
  onPressed: () {
    Navigator.of(context).push(
      MaterialPageRoute(
        builder: (context) => const ErrorHistoryPage(),
      ),
    );
  },
  tooltip: '–ò—Å—Ç–æ—Ä–∏—è –æ—à–∏–±–æ–∫',
),
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –ü–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **–î–æ—Å—Ç—É–ø –∫ –¥–µ—Ç–∞–ª—è–º** –æ—à–∏–±–æ–∫ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- **–ò—Å—Ç–æ—Ä–∏—è** –≤—Å–µ—Ö –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏—Ö –æ—à–∏–±–æ–∫
- **–£–¥–æ–±–Ω—ã–π UI** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä** –∏—Å—Ç–æ—Ä–∏–∏ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è)
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** –ø–æ ID
- **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** —Å—Ç–∞—Ä—ã—Ö –æ—à–∏–±–æ–∫

### ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:
- **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–Ω—è–º
- **–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–æ —É—Ä–æ–≤–Ω—é –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é** –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
- **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–µ
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** –∏ —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞** –¥–∞–Ω–Ω—ã—Ö

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
–í—Å–µ –æ—à–∏–±–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ ErrorBoundary –∏–ª–∏ ErrorController, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ–º–æ –≤–∏–¥–∂–µ—Ç
2. –ù–∞–∂–º–∏—Ç–µ –∏–∫–æ–Ω–∫—É "–ò—Å—Ç–æ—Ä–∏—è" –≤ AppBar
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –æ—à–∏–±–∫–∏, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º
4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π:
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–µ–Ω—é ‚Üí –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
- **–£–¥–∞–ª–µ–Ω–∏–µ**: –ú–µ–Ω—é ‚Üí –£–¥–∞–ª–∏—Ç—å
- **–û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ**: –ö–Ω–æ–ø–∫–∞ –≤ AppBar

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏** –∏ –º–æ–¥—É–ª—è–º
2. **–≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª** (JSON, CSV)
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å –æ–±–ª–∞—á–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
4. **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
5. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏ –≥—Ä–∞—Ñ–∏–∫–∏
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã** –ø–æ email

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏! üéâ
