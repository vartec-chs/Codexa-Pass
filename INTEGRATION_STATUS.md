# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫

## –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê

–°–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –æ—à–∏–±–æ–∫. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–ø–æ–≤.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ª–æ–∫–∞–ª–∏–∑–∞—Ç–æ—Ä ‚úÖ
- –§–∞–π–ª: `lib/core/error/error_localizations_universal.dart`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–µ —Å–∏—Å—Ç–µ–º—ã –æ—à–∏–±–æ–∫ (—Å—Ç–∞—Ä—É—é –∏ –Ω–æ–≤—É—é)
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π API –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚úÖ
- `CriticalErrorDialog` - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ `ConsumerStatefulWidget`, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `BaseAppError`
- `ErrorDetailsDialog` - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ `ConsumerStatefulWidget`, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `AppError` (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- `ErrorSnackBarContent` - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ `ConsumerWidget`, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `BaseAppError`

### 3. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω ErrorHandler ‚úÖ
- –í—Å–µ —Ç–∏–ø—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å `AppError` (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞) –Ω–∞ `BaseAppError`
- `Result<T>` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `BaseAppError`
- `ErrorManager` –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- `ErrorHandlerMixin` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `BaseAppError`

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ ‚úÖ
- –ó–∞–º–µ–Ω–µ–Ω `UnknownError` –Ω–∞ `UnknownAppError`
- –£–¥–∞–ª–µ–Ω—ã –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ø–æ–ª—é `details`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `message` –∏–∑ `BaseAppError`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫ (`UIError`, `BusinessError`)

## –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å:
- ‚úÖ `BaseAppError` (–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)
- ‚úÖ `AppError` –∏–∑ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (`enhanced_app_error.dart`)
- ‚úÖ –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã `getLegacy*`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç:
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∏–∞–ª–æ–≥–∏ —Å `BaseAppError`
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å `AppError` (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- ‚úÖ SnackBar —Å `BaseAppError`
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### ErrorHandler
```dart
// –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π BaseAppError
void handleError(BaseAppError error) {
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç UI
}

// Result —Ç–µ–ø–µ—Ä—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
Result<T> // –∏—Å–ø–æ–ª—å–∑—É–µ—Ç BaseAppError –¥–ª—è –æ—à–∏–±–æ–∫
```

### UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```dart
// CriticalErrorDialog
CriticalErrorDialog(
  error: BaseAppError, // –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π —Ç–∏–ø
)

// ErrorSnackBarContent
ErrorSnackBarContent(
  error: BaseAppError, // –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π —Ç–∏–ø
)

// ErrorDetailsDialog
ErrorDetailsDialog(
  error: AppError, // —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
)
```

### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```dart
// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
final localizations = ref.read(universalErrorLocalizationsProvider);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
localizations.getLocalizedMessage(error); // —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º BaseAppError

// –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
localizations.getLegacyLocalizedMessage(oldError); // –¥–ª—è —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
```

## –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—É—Ç—å

### –î–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```dart
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
class MyWidget extends ConsumerWidget {
  Widget build(BuildContext context, WidgetRef ref) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    ref.read(errorManagerProvider.notifier).handleError(myError);
    
    // –ò–ª–∏ —Å Result
    final result = await someOperation();
    if (result.isFailure) {
      ref.read(errorManagerProvider.notifier).handleError(result.error!);
    }
  }
}
```

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```dart
// Mixin —É–ø—Ä–æ—â–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é
class MyWidget extends ConsumerWidget with ErrorHandlerMixin {
  Widget build(BuildContext context, WidgetRef ref) {
    // –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
    handleError(ref, myError);
    handleResult(ref, result);
  }
}
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞**  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫**  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞**  
‚úÖ **–ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**  
‚úÖ **–í—Å–µ UI –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã**  
‚úÖ **ErrorHandler –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω**  
‚úÖ **–ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**  

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!** üöÄ
